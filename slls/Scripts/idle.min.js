(function(){var a;a={},a=function(){function a(a){var b,c;a&&(this.awayTimeout=parseInt(a.awayTimeout,10),this.onAway=a.onAway,this.onAwayBack=a.onAwayBack,this.onVisible=a.onVisible,this.onHidden=a.onHidden),c=this,b=function(){return c.onActive()},window.onclick=b,window.onmousemove=b,window.onmouseenter=b,window.onkeydown=b,window.onscroll=b,window.onmousewheel=b,this.startAwayTimeout(),document.addEventListener("visibilitychange",function(){return c.handleVisibilityChange()},!1),document.addEventListener("webkitvisibilitychange",function(){return c.handleVisibilityChange()},!1),document.addEventListener("msvisibilitychange",function(){return c.handleVisibilityChange()},!1)}a.isAway=!1,a.awayTimeout=3e3,a.awayTimestamp=0,a.awayTimer=null,a.onAway=null,a.onAwayBack=null,a.onVisible=null,a.onHidden=null,a.prototype.onActive=function(){this.awayTimestamp=(new Date).getTime()+this.awayTimeout,this.isAway&&(this.onAwayBack&&this.onAwayBack(),this.startAwayTimeout()),this.isAway=!1;return!0},a.prototype.startAwayTimeout=function(){var a;this.awayTimestamp=(new Date).getTime()+this.awayTimeout,this.awayTimer!==null&&clearTimeout(this.awayTimer),a=this;return this.awayTimer=setTimeout(function(){return a.checkAway()},this.awayTimeout+100)},a.prototype.setAwayTimeout=function(a){this.awayTimeout=parseInt(a,10);return this.startAwayTimeout()},a.prototype.checkAway=function(){var a,b;b=(new Date).getTime();if(b<this.awayTimestamp)this.isAway=!1,a=this,this.awayTimer=setTimeout(function(){return a.checkAway()},this.awayTimestamp-b+100);else{this.awayTimer!==null&&clearTimeout(this.awayTimer),this.isAway=!0;if(this.onAway)return this.onAway()}},a.prototype.handleVisibilityChange=function(){if(document.hidden||document.msHidden||document.webkitHidden){if(this.onHidden)return this.onHidden()}else if(this.onVisible)return this.onVisible()};return a}(),window.Idle=a}).call(this)